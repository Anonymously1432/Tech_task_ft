-- BEGIN;
--
-- ALTER TABLE users
-- ALTER COLUMN full_name DROP NOT NULL;
--
-- ALTER TABLE users
-- DROP CONSTRAINT IF EXISTS users_email_key;
--
-- ALTER TABLE applications
-- ALTER COLUMN data DROP NOT NULL;
--
-- ALTER TABLE policies
-- ALTER COLUMN start_date DROP NOT NULL;
--
-- ALTER TABLE policies
-- ALTER COLUMN end_date DROP NOT NULL;
--
-- ALTER TABLE policies
-- ALTER COLUMN coverage_amount DROP NOT NULL;
--
-- ALTER TABLE application_status_history
-- DROP CONSTRAINT IF EXISTS application_status_history_application_id_fkey;
--
-- INSERT INTO products (id, type, name, base_price) VALUES
-- --     (1, 'AUTO',   'ОСАГО/КАСКО', 5000),
--     (2, 'HOME',   'Жильё',       3000),
--     (3, 'LIFE',   'Жизнь',       10000),
--     (4, 'HEALTH', 'Здоровье (ДМС)', 15000),
--     (5, 'TRAVEL', 'Путешествия', 1500);
--
-- INSERT INTO users (email, password_hash, role, full_name, is_active) VALUES
--     ( 'client1@test.com',    '$2a$15$cqi2kc3qAvdl7FkIajhIDOvEa8Q1cmBXNPAFvy/IMS7eeXqo4NhB.',     'client',  'Иванов Иван Иванович', true),
--     (  'client2@test.com',    '$2a$15$cqi2kc3qAvdl7FkIajhIDOvEa8Q1cmBXNPAFvy/IMS7eeXqo4NhB.',     'client',  'Петрова Мария Сергеевна', true),
--     ( 'client3@test.com',    '$2a$15$cqi2kc3qAvdl7FkIajhIDOvEa8Q1cmBXNPAFvy/IMS7eeXqo4NhB.',     'client',  'Сидоров Алексей Павлович', true),
--     (  'blocked@test.com',    '$2a$15$cqi2kc3qAvdl7FkIajhIDOvEa8Q1cmBXNPAFvy/IMS7eeXqo4NhB.',     'client',  'Козлов Дмитрий', false),
--     ( 'manager1@test.com',   '$2a$15$SezWJOiCJZthHr4ppMXil.c5A2BHerQPgRDsrOZFgkIszqmhZuY6i',     'manager', 'Менеджер Мария Ивановна', true),
--     ( 'manager2@test.com',   '$2a$15$SezWJOiCJZthHr4ppMXil.c5A2BHerQPgRDsrOZFgkIszqmhZuY6i',     'manager', 'Менеджер Пётр Николаевич', true),
-- -- Баг #16: NULL в обязательном поле
--     (  'broken@test.com',     '$2a$15$cqi2kc3qAvdl7FkIajhIDOvEa8Q1cmBXNPAFvy/IMS7eeXqo4NhB.',     'client',  NULL, true),
-- -- Баг #15: дубликаты email
--     ( 'duplicate@test.com',  '$2a$15$cqi2kc3qAvdl7FkIajhIDOvEa8Q1cmBXNPAFvy/IMS7eeXqo4NhB.',     'client',  'Дубликат Первый', true),
--     ( 'duplicate@test.com',  '$2a$15$cqi2kc3qAvdl7FkIajhIDOvEa8Q1cmBXNPAFvy/IMS7eeXqo4NhB.',     'client',  'Дубликат Второй', true);
--
-- INSERT INTO applications (id, user_id, product_id, status, calculated_price) VALUES
--     (101, 1, 1, 'APPROVED', 45000),
--     (102, 1, 2, 'NEW', 18000),
--     (103, 2, 3, 'UNDER_REVIEW', 35000),
--     (104, 2, 5, 'REJECTED', 5000),
--     (105, 1, 4, 'APPROVED', 55000),
--     (106, 3, 1, 'NEW', 25000),
--     (107, 3, 2, 'NEW', 12000),
--     (108, 3, 3, 'REJECTED', 30000),
--     (109, 4, 1, 'UNDER_REVIEW', 40000),
--     (110, 4, 5, 'NEW', 6000),
--     (111,1,1,'NEW',20000),(112,1,2,'NEW',15000),(113,1,3,'NEW',30000),(114,1,4,'NEW',50000),(115,1,5,'NEW',7000),
--     (116,2,1,'APPROVED',45000),(117,2,2,'APPROVED',18000),(118,2,3,'APPROVED',35000),(119,2,4,'REJECTED',55000),(120,2,5,'NEW',8000),
--     (121,3,1,'NEW',22000),(122,3,2,'NEW',14000),(123,3,3,'UNDER_REVIEW',33000),(124,3,4,'NEW',51000),(125,3,5,'NEW',7500),
--     (126,4,1,'REJECTED',42000),(127,4,2,'NEW',16000),(128,4,3,'NEW',34000),(129,4,4,'UNDER_REVIEW',56000),(130,4,5,'NEW',8200),
--     (131,1,1,'NEW',23000),(132,1,2,'NEW',17000),(133,1,3,'NEW',36000),(134,1,4,'NEW',57000),(135,1,5,'NEW',9000),
--     (136,2,1,'NEW',24000),(137,2,2,'NEW',17500),(138,2,3,'NEW',37000),(139,2,4,'NEW',58000),(140,2,5,'NEW',9200),
--     (141,3,1,'NEW',25000),(142,2,1,'NEW',45000), -- IDOR
--     (143,3,2,'NEW',18000),(144,3,3,'NEW',38000),(145,3,4,'NEW',59000),
--     (146,4,1,'NEW',26000),(147,4,2,'NEW',18500),(148,4,3,'NEW',39000),(149,4,4,'NEW',60000),(150,4,5,'NEW',9500);
--
-- INSERT INTO policies (id, policy_number, user_id, product_id, status, premium) VALUES
--     (101, 'INS-2026-00001', 1, 1, 'ACTIVE', 45000),
--     (102, 'INS-2026-00002', 2, 2, 'ACTIVE', 18000),
--     (103, 'INS-2026-00003', 2, 3, 'ACTIVE', 35000),
--     (104, 'INS-2025-00010', 1, 5, 'EXPIRED', 5000),
--
-- -- Баг #13
--     (105, 'INS-2026-00005', 2, 4, 'ACTIVE', 45000),
--
--     (106,'INS-2026-00006',1,2,'ACTIVE',15000),
--     (107,'INS-2026-00007',1,3,'ACTIVE',30000),
--     (108,'INS-2026-00008',2,1,'ACTIVE',42000),
--     (109,'INS-2026-00009',3,5,'ACTIVE',8000),
--     (110,'INS-2026-00010',3,4,'ACTIVE',52000),
--     (111,'INS-2026-00011',4,1,'EXPIRED',40000),
--     (112,'INS-2026-00012',4,2,'ACTIVE',16000),
--     (113,'INS-2026-00013',1,4,'ACTIVE',55000),
--     (114,'INS-2026-00014',2,5,'ACTIVE',7500),
--     (115,'INS-2026-00015',3,1,'ACTIVE',23000),
--     (116,'INS-2026-00016',3,2,'ACTIVE',14000),
--     (117,'INS-2026-00017',4,3,'ACTIVE',34000),
--     (118,'INS-2026-00018',1,5,'ACTIVE',7000),
--     (119,'INS-2026-00019',2,4,'ACTIVE',56000),
--     (120,'INS-2026-00020',4,5,'ACTIVE',8200);
--
-- INSERT INTO payments (id, policy_id, amount, status) VALUES
--     (1, 5, 20000, 'COMPLETED'),
--     (2, 5, 20000, 'COMPLETED'),
--     (3, 5, 5000,  'PENDING');
--
-- INSERT INTO application_status_history (id, application_id, old_status, new_status) VALUES
--     (1,   1, NULL, 'NEW'),
--     (2,   1, 'NEW', 'APPROVED'),
--
-- -- Orphan-записи
--     (100, 999, 'NEW', 'UNDER_REVIEW'),
--     (101, 999, 'UNDER_REVIEW', 'REJECTED');
--
-- COMMIT;
